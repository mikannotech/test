---
title: "Python　～リストについて①～"
categories:
  - プログラミング
tags:
  - Python
---

# リストへのアクセス方法について

---

# リストの基本操作

### リストの作成と要素へのアクセス

```python
a = list(range(10))
print(a)

```

`range(10)`は0から9までの整数を生成し、`list()`で囲むことでリストに変換する。リスト`a`は以下のようになる。

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

```

リスト内の要素にアクセスするには**インデックス**を使用する。インデックスはリスト内の要素の位置を示し、最初の要素がインデックス0である。例えば、`a[1]`は2番目の要素（インデックス1）を指す。

```python
print(a[1])  # 1が出力される

```

### リストの要素の変更

リストの要素を変更するには、その要素に新しい値を代入する。例えば、最初の要素を5に変更するには以下のようにする。

```python
a[0] = 5
print(a)

```

この操作により、リスト`a`の最初の要素が0から5に変更され、次のように出力される。

```
[5, 1, 2, 3, 4, 5, 6, 7, 8, 9]

```

### リストの長さへのアクセス

リストの要素数を取得するには、`len()`関数を使用する。

```python
print(len(a))  # 10が出力される

```

`len(a)`はリスト`a`の長さ、つまり要素の数を返す。この例では、リスト`a`には10個の要素があり、`len(a)`は10を返す。

### まとめ

- リストの要素にはインデックスを使用してアクセスする。
- インデックスを指定してリストの要素を変更できる。
- `len()`関数でリストの長さ（要素数）を取得できる。

## スライス

### リストのスライス

```python
a = list(range(10))
print(a[2:4])

```

**スライス**はリストの一部を抽出するための機能。`a[2:4]`のように、**開始インデックス**と**終了インデックス**を指定して使用する。

- `a[2:4]`はリスト`a`のインデックス2から始まり、インデックス4の手前（つまりインデックス3まで）の要素を取得する。

### スライスの結果

この例では、リスト`a`は`[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]`である。

- `a[2:4]`はインデックス2に対応する要素`2`とインデックス3に対応する要素`3`を含むため、結果は`[2, 3]`である。

### スライスの範囲

スライスは`a[start:end]`の形式で使用され、`start`がスライスの開始位置、`end`が終了位置を示す。**終了インデックスの要素は含まれない**ことが重要である。

### まとめ

- スライスを使用して、リストの特定の範囲の要素を取り出せる。
- `a[start:end]`の形式で、開始インデックスから終了インデックスの手前までの要素を取得する。
- `a[2:4]`の場合、インデックス2から3までの要素`[2, 3]`が取得される。

## 負のインデックス

- リストの末尾からの要素アクセスが可能:
    - 最後の要素: `a[-1]`
    - 最後から2番目の要素: `a[-2]`
    これはリストの長さを知らなくても末尾の要素にアクセスできるため便利である。
- コードの可読性が向上する:
`a[len(a)-1]` よりも `a[-1]` の方が簡潔で読みやすい。

### 負のインデックスによる要素へのアクセス

```python
a = list(range(10))
print(a[-1])

```

リストに対して負のインデックスを使用すると、リストの末尾から数えた位置の要素にアクセスできる。`a[-1]`はリストの最後の要素を意味する。

- `a[-1]` はインデックス-1、つまり最後の要素を指し、`9`が出力される。

### 負のインデックスを使ったスライス

```python
print(a[-3:])

```

負のインデックスを使用してリストをスライスすることも可能である。`a[-3:]`はリストの末尾から3番目の要素から最後までの要素を取得する。

- `a[-3:]`はリスト`a`の末尾から3番目の要素（7）から最後までの要素を含むため、結果は`[7, 8, 9]`である。

### まとめ

- **負のインデックス**はリストの末尾から要素にアクセスするために使用する。
- `1` はリストの最後の要素、`2` は最後から2番目の要素を指す。
- 負のインデックスを使ってリストをスライスすることで、リストの末尾から部分的に要素を取り出せる。

---

# リストの参照とコピーについて

### コード

```python
# 参照を共有する場合
a = list(range(10))
b = a
a[0] = 77
b[1] = 88

print(a)
print(b)
print(id(a))
print(id(b))

# コピーを使う場合
a = list(range(10))
b = a.copy()
a[0] = 77
b[1] = 88

print(a)
print(b)
print(id(a))
print(id(b))

```

### 参照を共有する場合

### 実行結果

```
[77, 88, 2, 3, 4, 5, 6, 7, 8, 9]
[77, 88, 2, 3, 4, 5, 6, 7, 8, 9]
2169533536960
2169533536960

```

- `a`と`b`は同じリストを参照しているため、`a`の変更が`b`にも反映される。
- `id(a)`と`id(b)`の値が同じで、`a`と`b`が同じオブジェクトであることが確認できる。

### コピーを使う場合

### 実行結果

```
[77, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[0, 88, 2, 3, 4, 5, 6, 7, 8, 9]
1627655543488
1627652411968

```

- `a.copy()`を使用すると、`a`と`b`は別のリストオブジェクトになる。
- `a`の変更が`b`に影響せず、`b`の変更が`a`に影響しない。
- `id(a)`と`id(b)`の値が異なり、`a`と`b`が異なるオブジェクトであることが確認できる。

### まとめ

- **参照を共有する場合**:
    - 変数にリストを代入すると、参照が共有されるため、変更が両方に影響する。
- **コピーを使う場合**:
    - `copy()`メソッドを使用すると、リストのコピーが作成されるため、一方のリストの変更がもう一方には影響しない。